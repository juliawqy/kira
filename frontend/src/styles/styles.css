:root{
  /* Brand blues */
  --bb-50:#f0f7ff;--bb-100:#dceeff;--bb-200:#c3e0ff;--bb-300:#a6d0ff;--bb-400:#7fbaff;
  --bb-500:#5aa5ff;--bb-600:#3d90f7;--bb-700:#2b77d6;--bb-800:#1f5ead;--bb-900:#174a87;

  /* Neutrals */
  --ink:#0b1727;--muted:#627388;--muted-2:#4b5d74;
  --card:#fff;--border:#e7f2ff;--border-strong:#cfe0f7;
  --bg-grad-1:#fff;--bg-grad-2:#f6fbff;

  /* Semantic colors */
  --success:#12a150;--success-100:#e8f8ef;--success-200:#d2f1df;
  --info:#2563eb;--info-100:#eaf2ff;--info-200:#d6e3ff;
  --warn:#f59e0b;--warn-100:#fff6e7;--warn-200:#ffe8bf;
  --danger:#dc2626;--danger-100:#fff1f1;--danger-200:#ffd7d7;
  --gray-100:#f7fafc;--gray-200:#eef2f7;--gray-300:#e5ebf2;--gray-700:#334155;

  --ring:rgba(90,165,255,.55);
  --shadow:0 10px 25px rgba(23,74,135,.10),0 2px 8px rgba(23,74,135,.08);
  --radius:18px;
}

*{box-sizing:border-box}
html,body{height:100%}

body{
  margin:0;font-family:Inter,system-ui,sans-serif;color:var(--ink);
  background:
   radial-gradient(90vh 90vh at -10% 0%, var(--bb-100), transparent 60%),
   radial-gradient(80vh 80vh at 110% 10%, var(--bb-50), transparent 60%),
   linear-gradient(180deg,var(--bg-grad-1),var(--bg-grad-2) 65%);
}

/* Layout */
.container{max-width:1100px;padding:20px;margin:0 auto;}
.header-row{display:flex;align-items:center;justify-content:space-between;gap:16px}
.filter-row{padding-top:0}
.brand{display:flex;align-items:center;gap:12px}
.logo-img{height:44px;width:auto;display:block}
h1{margin:0;font-weight:800;letter-spacing:-.02em}
.subtitle{color:var(--muted);margin-top:2px}
.header-actions{display:flex;gap:10px}

.card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow)}
.hint{font-size:12px;color:#577399}
.empty{padding:24px;text-align:center;color:#5677a3}

/* Buttons */
.actions{display:flex;gap:10px;flex-wrap:wrap}
.btn{
  appearance:none;border:none;cursor:pointer;font-weight:700;padding:10px 14px;border-radius:12px;
  background:linear-gradient(180deg,var(--bb-400),var(--bb-600));color:#fff;box-shadow:0 6px 14px rgba(31,94,173,.25);
  transition:transform .15s ease, box-shadow .15s ease, filter .15s ease, opacity .15s ease;
}
.btn:hover{transform:translateY(-2px);box-shadow:0 10px 20px rgba(31,94,173,.28)}
.btn:active{transform:translateY(0);filter:saturate(1.05)}
.btn:disabled{opacity:.6;cursor:not-allowed}
.btn:focus-visible{outline:3px solid var(--bb-300);outline-offset:2px}

.btn.secondary{
  background:linear-gradient(180deg,#e6f2ff,#d6e9ff);color:#0f3a69;border:1px solid #cfe4ff;
  transition:background .15s ease, box-shadow .15s ease;
}
.btn.secondary:hover{box-shadow:0 6px 14px rgba(23,74,135,.12)}
.btn.ghost{background:#f0f7ff;color:#174a87;border:1px dashed #b9d8ff}
.btn.ghost:hover{background:#e8f2ff}
.btn.icon{background:#eef6ff;color:#174a87;border:1px solid #d6e9ff;padding:6px 10px;border-radius:10px}
.btn.tiny{padding:6px 10px;border-radius:10px;font-weight:700}

/* Danger (Delete) */
.btn.danger{
  background:linear-gradient(180deg,#ff6b6b,var(--danger));
  color:#fff;border:1px solid #ffb3b3;
}
.btn.danger:hover{box-shadow:0 6px 14px rgba(166,22,22,.25)}

/* Inputs */
.search{display:flex;gap:10px;margin-top:8px}
.search input{flex:1;min-height:44px}
.search-wide input{flex:1 1 auto;width:100%}
.status-select{min-width:160px;max-width:180px}
label{display:block;font-size:12px;color:#214a78;margin:6px 2px}
input,textarea,select{
  width:100%;padding:12px;border-radius:12px;border:1px solid #d5e8ff;background:#fafdff;
  outline:none;transition:box-shadow .15s,border-color .15s, background .15s;
  box-shadow:inset 0 1px 2px rgba(23,74,135,.04);
}
textarea{min-height:84px;resize:vertical}
input:focus,textarea:focus,select:focus{border-color:var(--bb-500);box-shadow:0 0 0 4px var(--ring)}

/* Cascading stack */
.dashboard-stack{display:flex;flex-direction:column;gap:18px;margin-top:20px}

/* Parent card */
.card-task{
  background:linear-gradient(145deg,#ffffff,#f8fbff);
  border:1px solid var(--border);
  border-radius:18px;
  padding:20px 22px;
  display:flex;flex-direction:column;gap:14px;
  box-shadow:var(--shadow);
  transition:transform .12s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
}
.card-task:hover{
  transform:translateY(-3px);
  box-shadow:0 18px 32px rgba(23,74,135,.16),0 6px 16px rgba(23,74,135,.1);
  border-color:#d9ebff;background:linear-gradient(145deg,#ffffff,#f5f9ff);
}
.card-task .title{font-weight:800;margin:0;font-size:1.22rem;letter-spacing:-.01em}
.card-task .meta{
  display:flex;flex-wrap:wrap;gap:10px;color:#375b8c;font-size:13px;line-height:1.5;margin-top:4px;
}

.card-task .meta .badge.status{
  margin-right:auto;flex-basis:100%;margin-bottom:6px;
}

.card-task .row-end{display:flex;justify-content:space-between;align-items:center;margin-top:6px}

/* Badges (generic) */
.badge{
  padding:6px 10px;border-radius:999px;font-weight:700;font-size:11px;
  background:#eaf3ff;color:#164172;border:1px solid #d6e9ff;
  box-shadow:0 1px 3px rgba(23,74,135,.08);
}

/* Status badges (stronger colors for scan-ability) */
.badge.status.todo{background:var(--gray-200);color:var(--gray-700);border-color:var(--gray-300)}
.badge.status.progress{background:var(--info-100);color:var(--info);border-color:var(--info-200)}
.badge.status.done{background:var(--success-100);color:var(--success);border-color:var(--success-200)}
.badge.status.blocked{background:var(--danger-100);color:var(--danger);border-color:var(--danger-200)}


/* Priority badge heat colors */
.badge.priority.low,
.sub-badge.priority.low {
  background:#fff7cc;   /* pale yellow */
  color:#a66c00;        /* dark amber text */
  border-color:#ffe680;
}

.badge.priority.medium,
.sub-badge.priority.medium {
  background:#ffd9b3;   /* light orange */
  color:#b34700;        /* dark orange text */
  border-color:#ffb366;
}

.badge.priority.high,
.sub-badge.priority.high {
  background:#ffcccc;   /* light red */
  color:#b30000;        /* strong red text */
  border-color:#ff8080;
}

/* Subtasks bubble */
.subtasks-inline{
  margin-top:12px;padding:14px;border-radius:14px;border:1px dashed #d6e9ff;background:#f9fcff;
  display:flex;flex-direction:column;gap:14px;
}

/* Subtask item */
.sub-item{
  display:flex;justify-content:space-between;align-items:flex-start;gap:16px;
  padding:12px 14px;border:1px solid #e0efff;border-radius:12px;background:#fff;
  transition:background .2s ease, border-color .2s ease, transform .12s ease;
  margin-left:14px;font-size:13px;
}
.sub-item:hover{background:#f0f7ff;border-color:#cfe4ff;transform:translateY(-1px)}

/* Subtask meta spacing so pills don't look cramped */
.sub-item .meta{
  display:flex;flex-wrap:wrap;align-items:center;font-size:12px;line-height:1.4;gap:10px;margin-top:4px;
}
.sub-item .meta .sub-badge.status{margin-right:auto;flex-basis:100%;margin-bottom:6px}

/* Subtask badges (smaller) */
.sub-badge{
  padding:4px 8px;border-radius:8px;font-weight:600;font-size:11px;background:#f2f8ff;color:#214a78;border:1px solid #d9ecff;
}
.sub-badge.status.todo{background:var(--gray-200);color:var(--gray-700);border-color:var(--gray-300)}
.sub-badge.status.progress{background:var(--info-100);color:var(--info);border-color:var(--info-200)}
.sub-badge.status.done{background:var(--success-100);color:var(--success);border-color:var(--success-200)}
.sub-badge.status.blocked{background:var(--danger-100);color:var(--danger);border-color:var(--danger-200)}


/* Task detail modal (centered with Escape to close) */
.detail-modal{
  position:fixed;inset:0;display:grid;place-items:center;z-index:50;
  background:rgba(13,30,60,.30);backdrop-filter:blur(4px);
}
.detail-modal[hidden]{display:none;}
.detail-card{
  width:640px;max-width:95vw;max-height:85vh;background:rgba(255,255,255,.97);
  backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:16px;
  box-shadow:0 18px 38px rgba(23,74,135,.18),0 6px 18px rgba(23,74,135,.12);
  overflow:auto;display:flex;flex-direction:column;
}
.detail-head{
  display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid #eaf3ff
}
.detail-body{padding:16px;display:flex;flex-direction:column;gap:12px}
.row{display:flex;gap:10px;flex-wrap:wrap}
.row .kv{background:#f7fbff;border:1px solid #e7f2ff;padding:8px 10px;border-radius:10px;font-size:13px}

/* CRUD Modals */
.modal-overlay{position:fixed;inset:0;background:rgba(13,30,60,.30);backdrop-filter:blur(4px);z-index:48}
.modal{position:fixed;inset:0;display:grid;place-items:center;z-index:49}
.modal[hidden], .modal-overlay[hidden]{display:none}
.modal-card{
  width:720px;max-width:95vw;background:rgba(255,255,255,.97);backdrop-filter:blur(16px);
  border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);overflow:hidden;
  max-height:85vh;display:flex;flex-direction:column;
}
.modal-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid #eaf3ff}
.modal-body{padding:16px;overflow:auto}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.grid2 .full{grid-column:1 / -1}

/* When modal open */
body.modal-open{overflow:hidden}

/* Pills (generic) */
.pill{
  display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;background:#eef6ff;border:1px solid #d6e9ff;
  font-weight:700;color:#174a87;max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
}

/* Search highlight utility (apply via JS if desired) */
.highlight{background:#fffbcc;border-radius:4px;padding:0 2px}

/* Tooltip (opt-in): add data-tooltip="Your text" to any .btn or element */
[data-tooltip]{position:relative}
[data-tooltip]::after{
  content:attr(data-tooltip);
  position:absolute;left:50%;bottom:calc(100% + 8px);transform:translateX(-50%);
  background:#0b1727;color:#fff;font-size:12px;font-weight:600;line-height:1;
  padding:8px 10px;border-radius:8px;white-space:nowrap;opacity:0;pointer-events:none;
  box-shadow:0 8px 18px rgba(0,0,0,.18);
  transition:opacity .15s ease, transform .15s ease;
}
[data-tooltip]:hover::after{opacity:1;transform:translateX(-50%) translateY(-2px)}

/* Distinct subtasks pill */
.badge.subtoggle {
  margin-left:auto;              /* pushes it to the far right */
  background:#eef8f1;            /* soft green background */
  color:#167343;                 /* darker green text */
  border:1px solid #cfead9;
  font-weight:700;
  cursor:pointer;
  transition:background .15s ease, box-shadow .15s ease;
}
.badge.subtoggle:hover {
  background:#e0f5e7;
  box-shadow:0 2px 6px rgba(22,115,67,.18);
}

/* Responsive tweaks */
@media (max-width: 900px){
  .container{padding:16px}
}
@media (max-width: 640px){
  .card-task{padding:16px}
  .card-task .meta{flex-direction:column;align-items:flex-start;gap:6px}
  .row{flex-direction:column}
  .grid2{grid-template-columns:1fr}
  .status-select{min-width:unset;max-width:100%}
  .actions{gap:8px}
}
